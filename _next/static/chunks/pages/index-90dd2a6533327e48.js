(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5765)}])},5765:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return be}});var r=t(5893),i=t(7294),l=t(3321),a=t(7948),c=t(6242),o=t(4267),u=t(2023),s=t(7957),d=t(9008),f=t(2293),h=t(155),v=t(5861),p=t(8298),x=t(4776),g=function(e){var n=(0,p.Z)();return(0,r.jsx)(x.Z,{appear:!1,direction:"down",in:!n,children:e.children})},m=function(){return(0,r.jsxs)(d.default,{children:[(0,r.jsx)("title",{children:"FF Image Clip"}),(0,r.jsx)("meta",{name:"description",content:"ff14\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3092\u304a\u624b\u8efd\u306b\u52a0\u5de5\u3059\u308b\u305f\u3081\u306eWeb\u30b5\u30fc\u30d3\u30b9"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})},j=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{children:(0,r.jsx)(f.Z,{children:(0,r.jsx)(h.Z,{style:{display:"flex",justifyContent:"center"},children:(0,r.jsx)(v.Z,{variant:"h5",component:"div",children:"FF Image Clip"})})})}),(0,r.jsx)(h.Z,{})]})},b=t(3044),C=function(e){var n=(0,i.useRef)(null),t=(0,i.useCallback)((function(t){if(t.target.files&&!(t.target.files.length<1)){var r=new FileReader,i=t.target.files[0];r.readAsDataURL(i),r.onload=function(){if(r.result){var t=r.result;e.onLoadFile(t,i.name)}n&&n.current&&(n.current.value="")}}}),[e]);return{ref:n,onChange:t}},y=function(e){var n=C({onLoadFile:e.onLoadFile}),t=n.ref,i=n.onChange;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{variant:"outlined",onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},endIcon:(0,r.jsx)(b.Z,{}),children:"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9"}),(0,r.jsx)("input",{style:{display:"none"},type:"file",accept:".jpg,.jpeg,.png",onChange:i,ref:t})]})},Z=t(5113),k=t(6693);function w(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function S(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,l=[],a=!0,c=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);a=!0);}catch(o){c=!0,i=o}finally{try{a||null==t.return||t.return()}finally{if(c)throw i}}return l}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return w(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return w(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O=function(e){var n=C({onLoadFile:e.onLoadFile}),t=n.ref,l=n.onChange;return(0,i.useEffect)((function(){var e=function(e){return e.preventDefault()},n=function(e){return e.preventDefault()};return document.addEventListener("dragover",e,!1),document.addEventListener("drop",n,!1),function(){document.removeEventListener("dragover",e),document.removeEventListener("drop",n)}}),[]),(0,r.jsxs)(Z.Z,{variant:"outlined",onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},onDrop:function(n){n.preventDefault();var r=n.dataTransfer,i=S(Array.from(r.files).filter((function(e){return e.type.includes("image/jpeg")||e.type.includes("image/png")})),1)[0],l=new FileReader;l.onload=function(){if(l.result){var n=l.result;e.onLoadFile(n,i.name)}t&&t.current&&(t.current.value=""),t.current&&(t.current.value="")},l.readAsDataURL(i)},onDragOver:function(e){e.dataTransfer.types&&Array.from(e.dataTransfer.types).includes("Files")&&(e.dataTransfer.dropEffect="copy",e.preventDefault())},sx:{backgroundColor:"transparent",width:"100%",minHeight:"200px",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(k.Z,{}),(0,r.jsx)(v.Z,{variant:"h6",component:"div",children:"\u753b\u50cf\u3092\u30c9\u30e9\u30c3\u30b0&\u30c9\u30ed\u30c3\u30d7\u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9"}),(0,r.jsx)("input",{style:{display:"none"},type:"file",accept:".jpg,.jpeg,.png",onChange:l,ref:t})]})},F="(C) SQUARE ENIX CO., LTD. All Rights Reserved.",R=function(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)("main",{children:[(0,r.jsx)(j,{}),(0,r.jsx)(a.Z,{sx:{my:2},children:(0,r.jsx)(c.Z,{children:(0,r.jsxs)(o.Z,{children:[e.file&&(0,r.jsx)("img",{src:e.file,style:{maxWidth:"100%"}}),!e.file&&(0,r.jsx)(O,{onLoadFile:e.onLoadFile}),(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(y,{onLoadFile:e.onLoadFile}),e.file&&(0,r.jsx)(l.Z,{variant:"contained",onClick:e.onEdit,endIcon:(0,r.jsx)(s.Z,{}),children:"\u7de8\u96c6"})]})]})})}),(0,r.jsx)("footer",{style:{padding:"0 1em"},children:F})]})]})},L=t(2777),E=t(1296),A=t.n(E),P=t(7357),I=t(7720),D=t(6447),W=t(3946),N=t(1048),T=t(55),_=t(3473),z=t(1733),M=t(89),B=t(9653),U=t(724),X=t(3441),H=t(7952),Y=t(7361),G=t(2096),K=t(2440),Q=t(9411),V=t(6886),$=t(6540),q=t(4895),J=function(e){var n=(0,i.useMemo)((function(){return e.value}),[e.value]);return(0,r.jsxs)(V.ZP,{container:!0,children:[e.title&&(0,r.jsx)(V.ZP,{item:!0,xs:!0,children:(0,r.jsx)(v.Z,{id:e.title,children:e.title})}),(0,r.jsxs)(V.ZP,{item:!0,container:!0,spacing:2,alignItems:"center",children:[(0,r.jsx)(V.ZP,{item:!0,xs:!0,children:(0,r.jsxs)(D.Z,{spacing:1,direction:"row",sx:{mb:1},alignItems:"center",children:[(0,r.jsx)(q.Z,{onClick:function(){var n=e.value-e.sliderStep<e.min?e.min:e.value-e.sliderStep;e.handleSliderChange(n)}}),(0,r.jsx)(Q.ZP,{disabled:e.disabled,value:n,min:e.min,max:e.max,step:e.sliderStep||1,valueLabelDisplay:"auto",onChange:function(n,t){var r=t;r<e.min?e.handleSliderChange(e.min):r>e.max?e.handleSliderChange(e.max):e.handleSliderChange(r)},"aria-labelledby":"input-slider"}),(0,r.jsx)($.Z,{onClick:function(){var n=e.value+e.sliderStep>e.max?e.max:e.value+e.sliderStep;e.handleSliderChange(n)}})]})}),(0,r.jsx)(V.ZP,{item:!0,children:(0,r.jsx)(M.Z,{disabled:e.disabled,value:n,size:"small",onChange:function(n){if(""!==n.target.value){var t=Number(n.target.value);t<e.min?e.handleSliderChange(e.min):e.handleSliderChange(t)}else e.handleSliderChange(e.max)},onBlur:function(){e.value<e.min?e.handleSliderChange(e.min):e.value>e.max&&e.handleSliderChange(e.max)},inputProps:{step:e.step,min:e.min,max:e.max,type:"number","aria-labelledby":e.title}})})]})]})};function ee(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ee(e,n,t[n])}))}return e}var te=function(e){var n=(0,i.useState)(null),t=n[0],a=n[1],c=(0,i.useState)(!1),o=c[0],u=c[1],s=(0,i.useState)(!1),d=s[0],f=s[1],h=(0,i.useState)({right:"2em",bottom:"2em"}),v=h[0],p=h[1],x=(0,i.useMemo)((function(){return new Map([["crop",e.handleOnCrop]])}),[e.handleOnCrop]),g=(0,i.useCallback)((function(e,n){var t=x.get(e);t&&t(n)}),[x]),m=(0,i.useCallback)((function(e){g(e,{type:"start"}),a(e),u(!0)}),[g]),j=(0,i.useCallback)((function(e){g(e,{type:"done"}),a(null),u(!1)}),[g]),b=(0,i.useCallback)((function(e){o&&(g(e,{type:"cancel"}),a(null),u(!1))}),[g,o]),C=(0,i.useCallback)((function(e){b(e)}),[b]),y=(0,i.useCallback)((function(n){e.handleRotateChange(n),b("crop")}),[b,e]),k=(0,i.useCallback)((function(n,t){f(t),e.handleOnCopyright(t,e.copyright.fontSize,e.copyright.color)}),[e]),w=(0,i.useCallback)((function(n){e.handleOnCopyright(d,n,e.copyright.color)}),[d,e]),S=(0,i.useCallback)((function(n){e.handleOnCopyright(d,e.copyright.fontSize,n.currentTarget.value)}),[d,e]),O=(0,i.useCallback)((function(e){var n=ne({},v);switch(e){case"left":n.left="1em",delete n.right;break;case"right":n.right="1em",delete n.left;break;case"up":n.top="72px",delete n.bottom;break;case"down":n.bottom="1em",delete n.top}p(n)}),[v]);return(0,r.jsx)(P.Z,{sx:ne({},v,{position:"absolute",minWidth:"400px"}),children:(0,r.jsxs)(Z.Z,{elevation:4,sx:{p:2,borderRadius:"16px"},children:[e.thumb,(0,r.jsxs)(D.Z,{spacing:2,divider:(0,r.jsx)(I.Z,{flexItem:!0}),children:[(0,r.jsxs)(D.Z,{spacing:1,children:[(0,r.jsxs)(D.Z,{direction:"row",spacing:1,children:[(0,r.jsx)(W.Z,{onClick:function(){return O("left")},children:(0,r.jsx)(H.Z,{})}),(0,r.jsx)(W.Z,{onClick:function(){return O("up")},children:(0,r.jsx)(Y.Z,{})}),(0,r.jsx)(W.Z,{onClick:function(){return O("down")},children:(0,r.jsx)(G.Z,{})}),(0,r.jsx)(W.Z,{onClick:function(){return O("right")},children:(0,r.jsx)(K.Z,{})})]}),(0,r.jsxs)(D.Z,{direction:"row",spacing:1,children:[(0,r.jsx)(l.Z,{variant:"outlined",onClick:e.handleOnDownload,startIcon:(0,r.jsx)(X.Z,{}),children:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9"}),(0,r.jsx)(l.Z,{variant:"outlined",onClick:e.handleOnCancel,startIcon:(0,r.jsx)(U.Z,{}),children:"\u623b\u308b"})]})]}),(0,r.jsx)(J,{title:"\u62e1\u5927/\u7e2e\u5c0f",value:e.scale,min:1,max:100,sliderStep:10,step:1,handleSliderChange:e.handleScaleChange}),(0,r.jsx)(J,{title:"\u56de\u8ee2",value:e.rotate,min:-180,max:180,sliderStep:45,step:1,handleSliderChange:y}),(0,r.jsxs)(P.Z,{children:[(0,r.jsxs)(D.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,r.jsx)(_.Z,{}),(0,r.jsx)(B.Z,{onChange:k}),(0,r.jsx)(M.Z,{disabled:!d,type:"color",sx:{width:"2em"},value:e.copyright.color,onChange:S})]}),(0,r.jsx)(J,{disabled:!d,value:e.copyright.fontSize,min:0,max:50,sliderStep:1,step:1,handleSliderChange:w})]}),(0,r.jsxs)(D.Z,{direction:"row",spacing:1,children:[(0,r.jsx)(W.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){return m("crop")},children:(0,r.jsx)(N.Z,{})}),o&&(0,r.jsx)(W.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){return j(t)},children:(0,r.jsx)(T.Z,{})}),o&&(0,r.jsx)(W.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){return C(t)},children:(0,r.jsx)(z.Z,{})})]}),(0,r.jsx)(D.Z,{children:(0,r.jsx)("footer",{style:{fontSize:"0.7em"},children:F})})]})]})})},re=t(657),ie=t(7645),le=t(1425),ae=t(6514),ce=t(3841),oe=t(3599),ue=t(4054),se=t(8589),de=function(e){return Math.round(10*e)/10},fe=function(e){var n=(0,i.useState)("png"),t=n[0],a=n[1],c=(0,i.useState)(null),o=c[0],u=c[1],s=(0,i.useState)(0),d=s[0],f=s[1],h=(0,i.useState)(1),p=h[0],x=h[1],g=(0,i.useState)(""),m=g[0],j=g[1],b=(0,i.useRef)(null),C=(0,i.useMemo)((function(){return e.fileName.slice(0,e.fileName.lastIndexOf("."))}),[e.fileName]),y=(0,i.useMemo)((function(){return d>=1e9?"".concat(de(d/1e3/1e3/1e3),"GB"):d>=1e6?"".concat(de(d/1e3/1e3),"MB"):d>=1e3?"".concat(de(d/1e3),"KB"):"".concat(de(d),"B")}),[d]),k=(0,i.useCallback)((function(e,n){if(e){var t=function(e){var n;u(e),f(null!==(n=null===e||void 0===e?void 0:e.size)&&void 0!==n?n:0)};"jpeg"!==n?e.toBlob(t,"image/".concat(n)):e.toBlob(t,"image/".concat(n),p)}}),[p]);(0,i.useEffect)((function(){e.canvas&&(j(e.canvas.toDataURL()),k(e.canvas,t))}),[e.canvas,k,t]);var w=(0,i.useCallback)((function(){e.onClose()}),[e]),S=(0,i.useCallback)((function(n){var t=n.target.value;a(t),k(e.canvas,t)}),[e.canvas,k]),O=(0,i.useCallback)((function(n){x(n),k(e.canvas,t)}),[e.canvas,k,t]),F=(0,i.useCallback)((function(){if(o){var e=document.createElement("a");e.download="".concat(C,".").concat(t),e.href=URL.createObjectURL(o),document.body.appendChild(e),e.click(),document.body.removeChild(e)}}),[o,C,t]);return(0,r.jsxs)(re.Z,{open:e.open,onClose:w,PaperProps:{sx:{maxWidth:"80vw",borderRadius:"16px"}},children:[(0,r.jsxs)(ie.Z,{children:[C,".",t]}),(0,r.jsx)(ae.Z,{dividers:!0,children:(0,r.jsxs)(D.Z,{spacing:2,children:[(0,r.jsx)("img",{ref:b,src:m,style:{maxWidth:"100%"}}),(0,r.jsxs)(V.ZP,{container:!0,spacing:2,width:"100%",children:[(0,r.jsx)(V.ZP,{item:!0,xs:2,pl:0,children:(0,r.jsx)(Z.Z,{variant:"outlined",sx:{backgroundColor:"transparent",width:"100%",height:"100%",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(v.Z,{variant:"h5",component:"div",children:y})})}),(0,r.jsx)(V.ZP,{item:!0,xs:10,children:(0,r.jsxs)(D.Z,{spacing:1,children:[(0,r.jsxs)(ue.Z,{fullWidth:!0,children:[(0,r.jsx)(ce.Z,{id:"download-file-ext",children:"\u30d5\u30a1\u30a4\u30eb\u306e\u7a2e\u985e"}),(0,r.jsxs)(se.Z,{labelId:"download-file-ext",id:"download-file-select",value:t,label:"type",onChange:S,children:[(0,r.jsx)(oe.Z,{value:"png",children:"png"}),(0,r.jsx)(oe.Z,{value:"jpeg",children:"jpeg"})]})]}),"jpeg"===t&&(0,r.jsx)(J,{title:"\u4fdd\u5b58\u54c1\u8cea",value:p,handleSliderChange:O,max:1,min:.01,sliderStep:.1,step:.01})]})})]})]})}),(0,r.jsxs)(le.Z,{children:[(0,r.jsx)(l.Z,{variant:"outlined",onClick:function(){return F()},startIcon:(0,r.jsx)(X.Z,{}),children:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9"}),(0,r.jsx)(l.Z,{variant:"text",onClick:w,children:"\u30ad\u30e3\u30f3\u30bb\u30eb"})]})]})},he=function(e){var n=(0,i.useState)(""),t=n[0],l=n[1],a=(0,i.useRef)(A()((function(e){e&&l(e.toDataURL("image/jpeg"))}),100));return(0,i.useEffect)((function(){a.current(e.canvas)}),[e.canvas]),(0,r.jsx)("img",{src:t,style:{maxWidth:"400px",maxHeight:"200px"}})};function ve(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function pe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ve(e,n,t[n])}))}return e}var xe="#FFFFFF",ge={left:0,top:0,fill:xe,fontSize:15,selectable:!1,hasControls:!1,visible:!1},me=function(e){(0,i.useRef)();var n=(0,i.useRef)(),t=(0,i.useRef)(),l=(0,i.useRef)(),c=(0,i.useRef)(),o=(0,i.useRef)(),u=(0,i.useState)(pe({},ge)),s=u[0],d=u[1],f=(0,i.useRef)(null),h=(0,i.useState)(!1),v=h[0],p=h[1],x=(0,i.useState)(100),g=x[0],b=x[1],C=(0,i.useState)(0),y=C[0],Z=C[1],k=(0,i.useState)(!1),w=k[0],S=k[1],O=(0,i.useState)(),R=O[0],E=O[1],I=(0,i.useRef)(A()((function(e,t){var r,i;if(n.current){var a,c;null===(r=n.current)||void 0===r||r.setZoom(1);var o,u={format:"png",left:0,top:0,width:100*(null!==(a=n.current.width)&&void 0!==a?a:1)/e,height:100*(null!==(c=n.current.height)&&void 0!==c?c:1)/e};if(l.current&&t){var s;l.current.set({opacity:0}).setCoords();var d,f,h,v,p,x=null!==(s=l.current.scaleX)&&void 0!==s?s:1,g=null!==(d=l.current.scaleY)&&void 0!==d?d:1;u.left=null!==(f=l.current.left)&&void 0!==f?f:0,u.top=null!==(h=l.current.top)&&void 0!==h?h:0,u.width=(null!==(v=l.current.width)&&void 0!==v?v:1)*x,u.height=(null!==(p=l.current.height)&&void 0!==p?p:1)*g}if(E(n.current.toCanvasElement(1,u)),l.current&&t)null===(o=l.current)||void 0===o||o.set({opacity:1}).setCoords();null===(i=n.current)||void 0===i||i.setZoom(e/100)}}),100)),D=(0,i.useCallback)((function(e){var r,i;if(c.current){null===(r=n.current)||void 0===r||r.setZoom(e/100);var l=c.current.setCoords().getBoundingRect();null===(i=n.current)||void 0===i||i.setDimensions({width:l.width,height:l.height}),t.current&&t.current.set({top:0,left:0,width:l.width/e*100,height:l.height/e*100}).setCoords(),c.current.viewportCenter().setCoords()}}),[]),W=(0,i.useCallback)((function(e){b(e),D(e)}),[D]),N=(0,i.useCallback)((function(e){var t;Z(e),c.current&&c.current.rotate(e),D(g),null===(t=n.current)||void 0===t||t.renderAll(),I.current(g,v)}),[v,g,D]),T=(0,i.useCallback)((function(){var e,r,i;if(l.current){if(l.current.set({visible:!1,top:0,left:0,scaleX:1,scaleY:1}),null===(e=t.current)||void 0===e?void 0:e.width){var a=.8*t.current.width;l.current.left=(t.current.width-a)/2,l.current.width=a}if(null===(r=t.current)||void 0===r?void 0:r.height){var c=.8*t.current.height;l.current.top=(t.current.height-c)/2,l.current.height=c}l.current.setCoords(),null===(i=n.current)||void 0===i||i.discardActiveObject()}}),[]),_=(0,i.useCallback)((function(e){var t;if(l.current){var r;if("start"===e.type)return l.current.strokeWidth=0,l.current.fill="rgba(0, 0, 0, 0.5)",l.current.selectable=!0,l.current.visible=!0,l.current.bringToFront(),null===(r=n.current)||void 0===r||r.setActiveObject(l.current),void p(!0);l.current.selectable=!1;var i,a=v;if("cancel"===e.type&&(a=!1,T()),"done"===e.type)a=!0,l.current.fill="rgba(0, 0, 0, 0)",l.current.strokeWidth=1,l.current.bringToFront(),null===(i=n.current)||void 0===i||i.discardActiveObject();p(a),I.current(g,a),null===(t=n.current)||void 0===t||t.renderAll()}}),[v,T,g]),z=(0,i.useCallback)((function(e,t,r){var i,a;if(o.current){var c,u,f,h,p,x;if(!e)return o.current.selectable=!1,o.current.visible=!1,null===(c=n.current)||void 0===c||c.discardActiveObject(),null===(u=n.current)||void 0===u||u.renderAll(),void I.current(g,v);if(d(pe({},s,{fontSize:t,fill:r})),o.current.set({left:0,top:0,fontSize:t,fill:r,selectable:!0,visible:!0}),v)o.current.set({left:Math.max(null!==(p=null===(f=l.current)||void 0===f?void 0:f.left)&&void 0!==p?p:0,0),top:Math.max(null!==(x=null===(h=l.current)||void 0===h?void 0:h.top)&&void 0!==x?x:0,0)});o.current.setCoords(),o.current.bringToFront(),null===(i=n.current)||void 0===i||i.setActiveObject(o.current),null===(a=n.current)||void 0===a||a.renderAll(),I.current(g,v)}}),[s,v,g]),M=(0,i.useCallback)((function(e){if(e){var r=new L.fabric.Canvas(e,{isDrawingMode:!1,backgroundColor:"rgba(255, 255, 255, 0.05)"});r.setDimensions({width:"400",height:"400"});var i=new L.fabric.Text(F,pe({},ge));r.add(i),o.current=i;var a=new L.fabric.Rect({fill:"none",width:20,height:20,evented:!1,selectable:!1});t.current=a,r.add(a);var c=new L.fabric.Rect({fill:"rgba(0, 0, 0, 0)",width:20,height:20,cornerStyle:"circle",stroke:"red",strokeWidth:1,strokeUniform:!0,visible:!1});c.setControlsVisibility({mtr:!1}),r.add(c),l.current=c,n.current=r}else n.current&&n.current.dispose()}),[]),B=(0,i.useCallback)((function(){if(f.current&&n&&n.current){var e=new L.fabric.Image(f.current,{top:0,left:0,centeredRotation:!0,selectable:!1});c.current=e,n.current.add(e),D(g),l.current&&T(),I.current(g,v),n.current.renderAll()}}),[v,T,g,D]);(0,i.useEffect)((function(){f.current&&(f.current.src=e.file)}),[e.file]);var U,X,H=(0,i.useCallback)((function(){I.current(g,v),S(!0)}),[v,g]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)("main",{children:[(0,r.jsx)(j,{}),(0,r.jsx)(a.Z,{sx:{my:2},maxWidth:!1,children:(0,r.jsx)("div",{style:{overflow:"auto",maxWidth:"100%",maxHeight:"100vh"},children:(0,r.jsxs)(P.Z,{children:[(0,r.jsx)("img",{ref:f,style:{display:"none"},onLoad:B}),(0,r.jsx)("canvas",{id:"c",ref:M})]})})}),(0,r.jsx)(te,{thumb:(0,r.jsx)(he,{canvas:R}),scale:g,rotate:y,copyright:{fontSize:null!==(U=s.fontSize)&&void 0!==U?U:15,color:null!==(X=s.fill)&&void 0!==X?X:xe},handleScaleChange:W,handleRotateChange:N,handleOnCrop:_,handleOnCopyright:z,handleOnCancel:e.onBack,handleOnDownload:H}),(0,r.jsx)(fe,{open:w,onClose:function(){return S(!1)},canvas:R,fileName:e.fileName})]})]})},je=function(){var e=(0,i.useState)(""),n=e[0],t=e[1],l=(0,i.useState)(void 0),a=l[0],c=l[1],o=(0,i.useState)(!1),u=o[0],s=o[1],d=(0,i.useCallback)((function(e,n){c(e),t(n),s(!0)}),[]),f=(0,i.useCallback)((function(){s(!0)}),[]),h=(0,i.useCallback)((function(){s(!1)}),[]);return(0,r.jsxs)(r.Fragment,{children:[u&&a&&(0,r.jsx)(me,{file:a,fileName:n,onBack:h}),!u&&(0,r.jsx)(R,{file:a,onLoadFile:d,onEdit:f})]})},be=function(){return(0,r.jsx)(je,{})}},4960:function(){},6759:function(){},6272:function(){}},function(e){e.O(0,[498,436,774,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);