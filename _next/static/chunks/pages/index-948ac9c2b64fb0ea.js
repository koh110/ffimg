(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(3407)}])},3407:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return xe}});var r=t(5893),i=t(7294),l=t(3321),a=t(7948),c=t(6242),o=t(4267),u=t(2023),s=t(7957),d=t(9008),f=t(2293),h=t(155),v=t(5861),p=t(8298),x=t(4776),g=function(e){var n=(0,p.Z)();return(0,r.jsx)(x.Z,{appear:!1,direction:"down",in:!n,children:e.children})},m=function(){return(0,r.jsxs)(d.default,{children:[(0,r.jsx)("title",{children:"FF Image Clip"}),(0,r.jsx)("meta",{name:"description",content:"ff14\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3092\u304a\u624b\u8efd\u306b\u52a0\u5de5\u3059\u308b\u305f\u3081\u306eWeb\u30b5\u30fc\u30d3\u30b9"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]})},j=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{children:(0,r.jsx)(f.Z,{children:(0,r.jsx)(h.Z,{style:{display:"flex",justifyContent:"center"},children:(0,r.jsx)(v.Z,{variant:"h5",component:"div",children:"FF Image Clip"})})})}),(0,r.jsx)(h.Z,{})]})},b=t(3044),C=function(e){var n=(0,i.useRef)(null),t=(0,i.useCallback)((function(t){if(t.target.files&&!(t.target.files.length<1)){var r=new FileReader,i=t.target.files[0];r.readAsDataURL(i),r.onload=function(){if(r.result){var t=r.result;e.onLoadFile(t,i.name)}n&&n.current&&(n.current.value="")}}}),[e]);return{ref:n,onChange:t}},y=function(e){var n=C({onLoadFile:e.onLoadFile}),t=n.ref,i=n.onChange;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{variant:"outlined",onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},endIcon:(0,r.jsx)(b.Z,{}),children:"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9"}),(0,r.jsx)("input",{style:{display:"none"},type:"file",accept:".jpg,.jpeg,.png",onChange:i,ref:t})]})},Z=t(5113),w=t(6693);function k(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function S(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,l=[],a=!0,c=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);a=!0);}catch(o){c=!0,i=o}finally{try{a||null==t.return||t.return()}finally{if(c)throw i}}return l}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return k(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return k(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O=function(e){var n=C({onLoadFile:e.onLoadFile}),t=n.ref,l=n.onChange;return(0,i.useEffect)((function(){var e=function(e){return e.preventDefault()},n=function(e){return e.preventDefault()};return document.addEventListener("dragover",e,!1),document.addEventListener("drop",n,!1),function(){document.removeEventListener("dragover",e),document.removeEventListener("drop",n)}}),[]),(0,r.jsxs)(Z.Z,{variant:"outlined",onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},onDrop:function(n){n.preventDefault();var r=n.dataTransfer,i=S(Array.from(r.files).filter((function(e){return e.type.includes("image/jpeg")||e.type.includes("image/png")})),1)[0],l=new FileReader;l.onload=function(){if(l.result){var n=l.result;e.onLoadFile(n,i.name)}t&&t.current&&(t.current.value=""),t.current&&(t.current.value="")},l.readAsDataURL(i)},onDragOver:function(e){e.dataTransfer.types&&Array.from(e.dataTransfer.types).includes("Files")&&(e.dataTransfer.dropEffect="copy",e.preventDefault())},sx:{backgroundColor:"transparent",width:"100%",minHeight:"200px",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(w.Z,{}),(0,r.jsx)(v.Z,{variant:"h6",component:"div",children:"\u753b\u50cf\u3092\u30c9\u30e9\u30c3\u30b0&\u30c9\u30ed\u30c3\u30d7\u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9"}),(0,r.jsx)("input",{style:{display:"none"},type:"file",accept:".jpg,.jpeg,.png",onChange:l,ref:t})]})},F=function(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)("main",{children:[(0,r.jsx)(j,{}),(0,r.jsx)(a.Z,{sx:{my:2},children:(0,r.jsx)(c.Z,{children:(0,r.jsxs)(o.Z,{children:[e.file&&(0,r.jsx)("img",{src:e.file,style:{maxWidth:"100%"}}),!e.file&&(0,r.jsx)(O,{onLoadFile:e.onLoadFile}),(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(y,{onLoadFile:e.onLoadFile}),e.file&&(0,r.jsx)(l.Z,{variant:"contained",onClick:e.onEdit,endIcon:(0,r.jsx)(s.Z,{}),children:"\u7de8\u96c6"})]})]})})})]})]})},R=t(2777),L=t(7357),A=t(7720),P=t(6447),I=t(3946),E=t(1048),D=t(55),T=t(3473),W=t(1733),N=t(89),U=t(9653),_=t(724),M=t(3441),z=t(7952),B=t(7361),X=t(2096),H=t(2440),Y=t(9411),G=t(6886),K=t(6540),Q=t(4895),V=function(e){var n=(0,i.useMemo)((function(){return e.value}),[e.value]);return(0,r.jsxs)(G.ZP,{container:!0,children:[e.title&&(0,r.jsx)(G.ZP,{item:!0,xs:!0,children:(0,r.jsx)(v.Z,{id:e.title,children:e.title})}),(0,r.jsxs)(G.ZP,{item:!0,container:!0,spacing:2,alignItems:"center",children:[(0,r.jsx)(G.ZP,{item:!0,xs:!0,children:(0,r.jsxs)(P.Z,{spacing:1,direction:"row",sx:{mb:1},alignItems:"center",children:[(0,r.jsx)(Q.Z,{onClick:function(){var n=e.value-e.sliderStep<e.min?e.min:e.value-e.sliderStep;e.handleSliderChange(n)}}),(0,r.jsx)(Y.ZP,{disabled:e.disabled,value:n,min:e.min,max:e.max,step:e.sliderStep||1,valueLabelDisplay:"auto",onChange:function(n,t){var r=t;r<e.min?e.handleSliderChange(e.min):r>e.max?e.handleSliderChange(e.max):e.handleSliderChange(r)},"aria-labelledby":"input-slider"}),(0,r.jsx)(K.Z,{onClick:function(){var n=e.value+e.sliderStep>e.max?e.max:e.value+e.sliderStep;e.handleSliderChange(n)}})]})}),(0,r.jsx)(G.ZP,{item:!0,children:(0,r.jsx)(N.Z,{disabled:e.disabled,value:n,size:"small",onChange:function(n){if(""!==n.target.value){var t=Number(n.target.value);t<e.min?e.handleSliderChange(e.min):e.handleSliderChange(t)}else e.handleSliderChange(e.max)},onBlur:function(){e.value<e.min?e.handleSliderChange(e.min):e.value>e.max&&e.handleSliderChange(e.max)},inputProps:{step:e.step,min:e.min,max:e.max,type:"number","aria-labelledby":e.title}})})]})]})};function $(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){$(e,n,t[n])}))}return e}var J=function(e){var n=(0,i.useState)(null),t=n[0],a=n[1],c=(0,i.useState)(!1),o=c[0],u=c[1],s=(0,i.useState)(!1),d=s[0],f=s[1],h=(0,i.useState)({right:"2em",bottom:"2em"}),v=h[0],p=h[1],x=(0,i.useMemo)((function(){return new Map([["crop",e.handleOnCrop]])}),[e.handleOnCrop]),g=(0,i.useCallback)((function(e,n){var t=x.get(e);t&&t(n)}),[x]),m=(0,i.useCallback)((function(e){g(e,{type:"start"}),a(e),u(!0)}),[g]),j=(0,i.useCallback)((function(e){g(e,{type:"done"}),a(null),u(!1)}),[g]),b=(0,i.useCallback)((function(e){o&&(g(e,{type:"cancel"}),a(null),u(!1))}),[g,o]),C=(0,i.useCallback)((function(e){b(e)}),[b]),y=(0,i.useCallback)((function(n){e.handleRotateChange(n),b("crop")}),[b,e]),w=(0,i.useCallback)((function(n,t){f(t),e.handleOnCopyright(t,e.copyright.fontSize,e.copyright.color)}),[e]),k=(0,i.useCallback)((function(n){e.handleOnCopyright(d,n,e.copyright.color)}),[d,e]),S=(0,i.useCallback)((function(n){e.handleOnCopyright(d,e.copyright.fontSize,n.currentTarget.value)}),[d,e]),O=(0,i.useCallback)((function(e){var n=q({},v);switch(e){case"left":n.left="1em",delete n.right;break;case"right":n.right="1em",delete n.left;break;case"up":n.top="72px",delete n.bottom;break;case"down":n.bottom="1em",delete n.top}p(n)}),[v]);return(0,r.jsx)(L.Z,{sx:q({},v,{position:"absolute",minWidth:"400px"}),children:(0,r.jsxs)(Z.Z,{elevation:4,sx:{p:2,borderRadius:"16px"},children:[(0,r.jsx)("img",{src:e.dataUrl,style:{maxWidth:"400px",maxHeight:"200px"}}),(0,r.jsxs)(P.Z,{spacing:2,divider:(0,r.jsx)(A.Z,{flexItem:!0}),children:[(0,r.jsxs)(P.Z,{spacing:1,children:[(0,r.jsxs)(P.Z,{direction:"row",spacing:1,children:[(0,r.jsx)(I.Z,{onClick:function(){return O("left")},children:(0,r.jsx)(z.Z,{})}),(0,r.jsx)(I.Z,{onClick:function(){return O("up")},children:(0,r.jsx)(B.Z,{})}),(0,r.jsx)(I.Z,{onClick:function(){return O("down")},children:(0,r.jsx)(X.Z,{})}),(0,r.jsx)(I.Z,{onClick:function(){return O("right")},children:(0,r.jsx)(H.Z,{})})]}),(0,r.jsxs)(P.Z,{direction:"row",spacing:1,children:[(0,r.jsx)(l.Z,{variant:"outlined",onClick:e.handleOnDownload,startIcon:(0,r.jsx)(M.Z,{}),children:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9"}),(0,r.jsx)(l.Z,{variant:"outlined",onClick:e.handleOnCancel,startIcon:(0,r.jsx)(_.Z,{}),children:"\u623b\u308b"})]})]}),(0,r.jsx)(V,{title:"\u62e1\u5927/\u7e2e\u5c0f",value:e.scale,min:1,max:100,sliderStep:10,step:1,handleSliderChange:e.handleScaleChange}),(0,r.jsx)(V,{title:"\u56de\u8ee2",value:e.rotate,min:-180,max:180,sliderStep:10,step:1,handleSliderChange:y}),(0,r.jsxs)(L.Z,{children:[(0,r.jsxs)(P.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,r.jsx)(T.Z,{}),(0,r.jsx)(U.Z,{onChange:w}),(0,r.jsx)(N.Z,{disabled:!d,type:"color",sx:{width:"2em"},value:e.copyright.color,onChange:S})]}),(0,r.jsx)(V,{disabled:!d,value:e.copyright.fontSize,min:0,max:50,sliderStep:1,step:1,handleSliderChange:k})]}),(0,r.jsxs)(P.Z,{direction:"row",spacing:1,children:[(0,r.jsx)(I.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){return m("crop")},children:(0,r.jsx)(E.Z,{})}),o&&(0,r.jsx)(I.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){return j(t)},children:(0,r.jsx)(D.Z,{})}),o&&(0,r.jsx)(I.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){return C(t)},children:(0,r.jsx)(W.Z,{})})]})]})]})})},ee=t(657),ne=t(7645),te=t(1425),re=t(6514),ie=t(3841),le=t(3599),ae=t(4054),ce=t(8589),oe=function(e){return Math.round(10*e)/10},ue=function(e){var n=(0,i.useState)("png"),t=n[0],a=n[1],c=(0,i.useState)(null),o=c[0],u=c[1],s=(0,i.useState)(0),d=s[0],f=s[1],h=(0,i.useState)(1),p=h[0],x=h[1],g=(0,i.useRef)(null),m=(0,i.useRef)(null),j=(0,i.useMemo)((function(){return e.fileName.slice(0,e.fileName.lastIndexOf("."))}),[e.fileName]),b=(0,i.useMemo)((function(){return d>=1e9?"".concat(oe(d/1e3/1e3/1e3),"GB"):d>=1e6?"".concat(oe(d/1e3/1e3),"MB"):d>=1e3?"".concat(oe(d/1e3),"KB"):"".concat(oe(d),"B")}),[d]),C=(0,i.useCallback)((function(){e.onClose()}),[e]),y=(0,i.useCallback)((function(e){if(m.current){var n=function(e){var n;u(e),f(null!==(n=null===e||void 0===e?void 0:e.size)&&void 0!==n?n:0)};"jpeg"!==e?m.current.toBlob(n,"image/".concat(e)):m.current.toBlob(n,"image/".concat(e),p)}}),[p]),w=(0,i.useCallback)((function(){if(m.current&&g.current){m.current.width=g.current.naturalWidth,m.current.height=g.current.naturalHeight;var e=m.current.getContext("2d");null===e||void 0===e||e.drawImage(g.current,0,0),y(t)}}),[y,t]),k=(0,i.useCallback)((function(e){var n=e.target.value;a(n),y(n)}),[y]),S=(0,i.useCallback)((function(e){x(e),y(t)}),[y,t]),O=(0,i.useCallback)((function(){if(m.current&&o){var e=document.createElement("a");e.download="".concat(j,".").concat(t),e.href=URL.createObjectURL(o),document.body.appendChild(e),e.click(),document.body.removeChild(e)}}),[o,j,t]);return(0,r.jsxs)(ee.Z,{open:e.open,onClose:C,PaperProps:{sx:{maxWidth:"80vw",borderRadius:"16px"}},children:[(0,r.jsx)("canvas",{ref:m,style:{display:"none"}}),(0,r.jsxs)(ne.Z,{children:[j,".",t]}),(0,r.jsx)(re.Z,{dividers:!0,children:(0,r.jsxs)(P.Z,{spacing:2,children:[(0,r.jsx)("img",{ref:g,src:e.dataUrl,onLoad:w,style:{maxWidth:"100%"}}),(0,r.jsxs)(G.ZP,{container:!0,spacing:2,width:"100%",children:[(0,r.jsx)(G.ZP,{item:!0,xs:2,pl:0,children:(0,r.jsx)(Z.Z,{variant:"outlined",sx:{backgroundColor:"transparent",width:"100%",height:"100%",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(v.Z,{variant:"h5",component:"div",children:b})})}),(0,r.jsx)(G.ZP,{item:!0,xs:10,children:(0,r.jsxs)(P.Z,{spacing:1,children:[(0,r.jsxs)(ae.Z,{fullWidth:!0,children:[(0,r.jsx)(ie.Z,{id:"download-file-ext",children:"\u30d5\u30a1\u30a4\u30eb\u306e\u7a2e\u985e"}),(0,r.jsxs)(ce.Z,{labelId:"download-file-ext",id:"download-file-select",value:t,label:"type",onChange:k,children:[(0,r.jsx)(le.Z,{value:"png",children:"png"}),(0,r.jsx)(le.Z,{value:"jpeg",children:"jpeg"})]})]}),"jpeg"===t&&(0,r.jsx)(V,{title:"\u4fdd\u5b58\u54c1\u8cea",value:p,handleSliderChange:S,max:1,min:.01,sliderStep:.1,step:.01})]})})]})]})}),(0,r.jsxs)(te.Z,{children:[(0,r.jsx)(l.Z,{variant:"outlined",onClick:function(){return O()},startIcon:(0,r.jsx)(M.Z,{}),children:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9"}),(0,r.jsx)(l.Z,{variant:"text",onClick:C,children:"\u30ad\u30e3\u30f3\u30bb\u30eb"})]})]})};function se(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function de(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){se(e,n,t[n])}))}return e}var fe="#FFFFFF",he={left:0,top:0,fill:fe,fontSize:15,selectable:!1,hasControls:!1,visible:!1},ve=function(e){var n=(0,i.useRef)(),t=(0,i.useRef)(),l=(0,i.useRef)(),c=(0,i.useRef)(),o=(0,i.useRef)(),u=(0,i.useRef)(),s=(0,i.useState)(de({},he)),d=s[0],f=s[1],h=(0,i.useRef)(null),v=(0,i.useState)(""),p=v[0],x=v[1],g=(0,i.useState)(!1),b=g[0],C=g[1],y=(0,i.useState)(100),Z=y[0],w=y[1],k=(0,i.useState)(0),S=k[0],O=k[1],F=(0,i.useState)(!1),A=F[0],P=F[1],I=(0,i.useCallback)((function(e){n.current&&clearTimeout(n.current),n.current=window.setTimeout((function(){var n,r;if(t.current){var i,l;null===(n=t.current)||void 0===n||n.setZoom(1);var a={format:"png",left:0,top:0,width:100*(null!==(i=t.current.width)&&void 0!==i?i:1)/Z,height:100*(null!==(l=t.current.height)&&void 0!==l?l:1)/Z};if(c.current&&e){var o;c.current.set({opacity:0}).setCoords();var u,s,d,f,h,v=null!==(o=c.current.scaleX)&&void 0!==o?o:1,p=null!==(u=c.current.scaleY)&&void 0!==u?u:1;a.left=null!==(s=c.current.left)&&void 0!==s?s:0,a.top=null!==(d=c.current.top)&&void 0!==d?d:0,a.width=(null!==(f=c.current.width)&&void 0!==f?f:1)*v,a.height=(null!==(h=c.current.height)&&void 0!==h?h:1)*p}var g,m=t.current.toDataURL(a);if(x(m),c.current&&e)null===(g=c.current)||void 0===g||g.set({opacity:1}).setCoords();null===(r=t.current)||void 0===r||r.setZoom(Z/100)}}),200)}),[Z]),E=(0,i.useCallback)((function(e){var n,r;if(o.current){null===(n=t.current)||void 0===n||n.setZoom(e/100);var i=o.current.setCoords().getBoundingRect();null===(r=t.current)||void 0===r||r.setDimensions({width:i.width,height:i.height}),l.current&&l.current.set({top:0,left:0,width:i.width/e*100,height:i.height/e*100}).setCoords(),o.current.viewportCenter().setCoords()}}),[]),D=(0,i.useCallback)((function(e){w(e),E(e)}),[E]),T=(0,i.useCallback)((function(e){var n;O(e),o.current&&o.current.rotate(e),E(Z),null===(n=t.current)||void 0===n||n.renderAll(),I(b)}),[b,I,Z,E]),W=(0,i.useCallback)((function(){var e,n,r;if(c.current){if(c.current.set({visible:!1,top:0,left:0,scaleX:1,scaleY:1}),null===(e=l.current)||void 0===e?void 0:e.width){var i=.8*l.current.width;c.current.left=(l.current.width-i)/2,c.current.width=i}if(null===(n=l.current)||void 0===n?void 0:n.height){var a=.8*l.current.height;c.current.top=(l.current.height-a)/2,c.current.height=a}c.current.setCoords(),null===(r=t.current)||void 0===r||r.discardActiveObject()}}),[]),N=(0,i.useCallback)((function(e){var n;if(c.current){var r;if("start"===e.type)return c.current.strokeWidth=0,c.current.fill="rgba(0, 0, 0, 0.5)",c.current.selectable=!0,c.current.visible=!0,c.current.bringToFront(),null===(r=t.current)||void 0===r||r.setActiveObject(c.current),void C(!0);c.current.selectable=!1;var i,l=b;if("cancel"===e.type&&(l=!1,W()),"done"===e.type)l=!0,c.current.fill="rgba(0, 0, 0, 0)",c.current.strokeWidth=1,c.current.bringToFront(),null===(i=t.current)||void 0===i||i.discardActiveObject();C(l),I(l),null===(n=t.current)||void 0===n||n.renderAll()}}),[b,W,I]),U=(0,i.useCallback)((function(e,n,r){var i,l;if(u.current){var a,o,s,h,v,p;if(!e)return u.current.selectable=!1,u.current.visible=!1,null===(a=t.current)||void 0===a||a.discardActiveObject(),null===(o=t.current)||void 0===o||o.renderAll(),void I(b);if(f(de({},d,{fontSize:n,fill:r})),u.current.set({left:0,top:0,fontSize:n,fill:r,selectable:!0,visible:!0}),b)u.current.set({left:Math.max(null!==(v=null===(s=c.current)||void 0===s?void 0:s.left)&&void 0!==v?v:0,0),top:Math.max(null!==(p=null===(h=c.current)||void 0===h?void 0:h.top)&&void 0!==p?p:0,0)});u.current.setCoords(),u.current.bringToFront(),null===(i=t.current)||void 0===i||i.setActiveObject(u.current),null===(l=t.current)||void 0===l||l.renderAll(),I(b)}}),[d,b,I]),_=(0,i.useCallback)((function(e){if(e){var n=new R.fabric.Canvas(e,{isDrawingMode:!1,backgroundColor:"rgba(255, 255, 255, 0.05)"});n.setDimensions({width:"400",height:"400"});var r=new R.fabric.Text("(C) SQUARE ENIX CO., LTD. All Rights Reserved.",de({},he));n.add(r),u.current=r;var i=new R.fabric.Rect({fill:"none",width:20,height:20,evented:!1,selectable:!1});l.current=i,n.add(i);var a=new R.fabric.Rect({fill:"rgba(0, 0, 0, 0)",width:20,height:20,cornerStyle:"circle",stroke:"red",strokeWidth:1,strokeUniform:!0,visible:!1});a.setControlsVisibility({mtr:!1}),n.add(a),c.current=a,t.current=n}else t.current&&t.current.dispose()}),[]),M=(0,i.useCallback)((function(){if(h.current&&t&&t.current){var e=new R.fabric.Image(h.current,{top:0,left:0,centeredRotation:!0,selectable:!1});o.current=e,t.current.add(e),E(Z),c.current&&W(),t.current.renderAll()}}),[W,Z,E]);(0,i.useEffect)((function(){h.current&&(h.current.src=e.file,x(e.file))}),[e.file]);var z,B,X=(0,i.useCallback)((function(){I(b),P(!0)}),[b,I]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)("main",{children:[(0,r.jsx)(j,{}),(0,r.jsx)(a.Z,{sx:{my:2},maxWidth:!1,children:(0,r.jsx)("div",{style:{overflow:"auto",maxWidth:"100%",maxHeight:"100vh"},children:(0,r.jsxs)(L.Z,{children:[(0,r.jsx)("img",{ref:h,style:{display:"none"},onLoad:M}),(0,r.jsx)("canvas",{id:"c",ref:_})]})})}),(0,r.jsx)(J,{dataUrl:p,scale:Z,rotate:S,copyright:{fontSize:null!==(z=d.fontSize)&&void 0!==z?z:15,color:null!==(B=d.fill)&&void 0!==B?B:fe},handleScaleChange:D,handleRotateChange:T,handleOnCrop:N,handleOnCopyright:U,handleOnCancel:e.onBack,handleOnDownload:X}),(0,r.jsx)(ue,{open:A,onClose:function(){return P(!1)},dataUrl:p,fileName:e.fileName})]})]})},pe=function(){var e=(0,i.useState)(""),n=e[0],t=e[1],l=(0,i.useState)(void 0),a=l[0],c=l[1],o=(0,i.useState)(!1),u=o[0],s=o[1],d=(0,i.useCallback)((function(e,n){c(e),t(n),s(!0)}),[]),f=(0,i.useCallback)((function(){s(!0)}),[]),h=(0,i.useCallback)((function(){s(!1)}),[]);return(0,r.jsxs)(r.Fragment,{children:[u&&a&&(0,r.jsx)(ve,{file:a,fileName:n,onBack:h}),!u&&(0,r.jsx)(F,{file:a,onLoadFile:d,onEdit:f})]})},xe=function(){return(0,r.jsx)(pe,{})}},4960:function(){},6759:function(){},6272:function(){}},function(e){e.O(0,[498,597,774,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);